I"ò<h1 id="arcgis-api-for-javascript-422å­¦ä¹ ---æ„å»º-vuearcgis-é¡¹ç›®">ArcGIS API for JavaScript 4.22å­¦ä¹  - æ„å»º Vue+ArcGIS é¡¹ç›®</h1>
<p>ä¸‹é¢å°†è®°å½•ä¸‹å¦‚ä½•æ„å»ºä¸€ä¸ª Vue + ArcGIS çš„é¡¹ç›®ã€‚</p>

<h2 id="æ„å»ºç¯å¢ƒ">æ„å»ºç¯å¢ƒ</h2>
<p>åœ¨æ­£å¼å¼€å‘å‰ï¼Œæœ¬åœ°éœ€è¦å…ˆé…ç½®å¥½ä¸¤ä¸ªç¯å¢ƒï¼š NodeJSç¯å¢ƒå’ŒVueç¯å¢ƒ</p>

<p><strong>NodeJSç¯å¢ƒå®‰è£…</strong><br />
å¯è¿›å…¥åˆ° NodeJSä¸­æ–‡å®˜ç½‘(<a>https://nodejs.org/zh-cn/download/current/</a>)çš„ä¸‹è½½é¡µä¸‹è½½NodeJSï¼Œæ­¤å¤„ä¸å»ºè®®ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ï¼Œå› ä¸ºè‹¥æ˜¯åç»­æœ‰è¦ä½¿ç”¨sass/scssç­‰CSSé¢„å¤„ç†å™¨çš„è¯ï¼Œ sass/scssä¸NodeJS çš„ç‰ˆæœ¬ä¾èµ–è¾ƒé«˜ï¼Œæœ€æ–°ç‰ˆæœ¬çš„NodeJSä¸€èˆ¬ä¼šå¯¼è‡´sass/scsså®‰è£…å¤±è´¥ã€‚æˆ‘ä¸ªäººä½¿ç”¨çš„æ˜¯ Node.js 14.18.2 ç‰ˆæœ¬(https://nodejs.org/download/release/v14.18.2/)çš„</p>

<blockquote>
  <p>ç½‘é¡µå…¥å£åœ¨ï¼šNodJSå®˜ç½‘â†’ä¸‹è½½é¡µï¼Œé€‰æ‹©â€ä»¥å¾€ç‰ˆæœ¬â€â†’è¡¨æ ¼é€‰æ‹©ä¸€ä¸ªç¨³å®šç‰ˆæœ¬ï¼Œå¦‚v14.18.2(æˆ‘ä¸»è¦æ˜¯è€ƒè™‘å…¼å®¹scss)ï¼Œç‚¹å‡»ä¸‹è½½è·³è½¬â†’åœ¨ä¸‹è½½é¡µä¸‹è½½ç¨‹åº å³å¯ã€‚</p>
</blockquote>

<p>å¦‚ä¸‹å›¾</p>

<p><img src="/img/20210715/2021071503.png" alt="" /><br />
<img src="/img/20210715/2021071501.png" alt="" /><br />
<img src="/img/20210715/2021071502.png" alt="" /></p>

<p>ä¸‹è½½å®Œå®‰è£…åŒ…ä¹‹åï¼ŒåŒå‡»å®‰è£…åŒ…ï¼Œå¼¹å‡ºå®‰è£…ç•Œé¢ï¼Œé€‰æ‹©ç›¸åº”çš„å®‰è£…ç›®å½•æˆ–è€…é»˜è®¤å®‰è£…è·¯å¾„ï¼Œç„¶åä¸€è·¯ç‚¹å‡» Next æŒ‰é’®å³å¯ï¼Œä¸­é—´è¿‡ç¨‹å¹¶æ²¡æœ‰ç‰¹åˆ«éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼›å®‰è£…å®Œæˆåï¼Œæ‰“å¼€ç”µè„‘ cmd çª—å£ï¼ŒæŸ¥è¯¢nodeç‰ˆæœ¬å·ä¿¡æ¯ï¼Œè‹¥èƒ½æ˜¾ç¤ºå‡ºç‰ˆæœ¬å·åˆ™å®‰è£…æˆåŠŸã€‚</p>

<p><img src="/img/20210715/2021071504.png" alt="" /></p>

<p><strong>Vueç¯å¢ƒå®‰è£…</strong><br />
Vueæ–¹é¢æˆ‘ä¸ªäººä½¿ç”¨çš„æ˜¯ Vue2.x ç‰ˆæœ¬ï¼Œå¯æ‰§è¡Œä¸‹é¢å‘½ä»¤å®‰è£…ç¯å¢ƒå¹¶åˆ›å»ºé¡¹ç›®</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># æœ€æ–°ç¨³å®šç‰ˆ
npm install vue

# åœ¨è‡ªå·±å¯¹åº”çš„é¡¹ç›®ç›®å½•ä¸‹ åˆ›å»ºVueé¡¹ç›®
# åˆ›å»ºè¿‡ç¨‹ä¸­ï¼Œæ³¨æ„é€‰æ‹©Vue2
vue create xxxx 
</code></pre></div></div>

<blockquote>
  <p>å¯é€šè¿‡å‘½ä»¤è¡Œ vue â€“version ï¼ŒæŸ¥çœ‹å½“å‰å®‰è£…çš„ Vue ç¯å¢ƒç‰ˆæœ¬</p>
</blockquote>

<h2 id="ä½¿ç”¨arcgis">ä½¿ç”¨ArcGIS</h2>
<p>ç½‘ä¸Šæ¶‰åŠ Vue+ArcGIS çš„æ¯”è¾ƒå¤šçš„éƒ½æ˜¯ç”¨ 4.17 ä»¥å‰çš„ç‰ˆæœ¬ï¼Œå‡æ˜¯ä¼šæ¨èå®‰è£… npm install esri-loader â€“save-dev ã€‚ è€Œæˆ‘ä½¿ç”¨çš„æ˜¯ ArcGISæœ€æ–°ç‰ˆæœ¬çš„ ESM æ–¹å¼ï¼Œæˆ‘éœ€è¦å®‰è£…çš„æ˜¯ @arcgis/coreï¼Œ æ¨¡å—çš„ä½¿ç”¨ä¹Ÿå¦‚åŒæˆ‘ä»¬å¹³æ—¶ES6åŠ è½½æ¨¡å—åŠŸèƒ½ä¸€æ ·ä¾¿åˆ©ã€‚</p>
<ol>
  <li>åœ¨å½“å‰åˆ›å»ºçš„ Vueé¡¹ç›®ç›®å½•é‡Œï¼Œå³é”®æ‰“å¼€å‘½ä»¤è¡Œå·¥å…·ï¼Œæ‰§è¡Œå¹¶å¼•ç”¨ ArcGIS çš„ ESM æ¨¡å—ï¼š
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># å°†æ¨¡å—å®‰è£…åˆ°é¡¹ç›®ä¸­
npm install @arcgis/core
</code></pre></div>    </div>
  </li>
  <li>è‹¥æœ‰éœ€è¦ç”¨åˆ°ç›¸å…³ ArcGIS æ¨¡å—çš„ï¼Œç›´æ¥ä½¿ç”¨importè¯­å¥åŠ è½½å•ä¸ªæ¨¡å—
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import WebMap from "@arcgis/core/WebMap";
import * as projection from "@arcgis/core/geometry/projection";
</code></pre></div>    </div>
  </li>
  <li>è¿˜éœ€è¦åœ¨ App.vue æˆ–è€…è‡ªå®šä¹‰çš„ index.vue é¡µé¢ä¸­ï¼Œå¼•å…¥ç›¸å…³çš„CSSæ–‡ä»¶</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;style&gt;
/* ä½¿ç”¨GISå°ç»„ä»¶å¦‚å¼¹æ¡†ã€è·ç¦»/é¢ç§¯æµ‹é‡æ—¶ï¼Œéœ€è¦å¼•ç”¨å½“å‰cssæ‰èƒ½æ˜¾ç¤º */
@import "https://js.arcgis.com/4.22/@arcgis/core/assets/esri/themes/dark/main.css";
&lt;/style&gt;
</code></pre></div></div>

<p>ç»¼ä¸Šï¼Œä¾¿å®Œæˆäº†åœ¨Vueä¸­ å¼•ç”¨ ArcGIS çš„é…ç½®ï¼Œæ¥ä¸‹æ¥è‹¥æœ‰éœ€è¦ç”¨åˆ°ç›¸å…³ ArcGIS æ¨¡å—çš„ï¼Œç›´æ¥importå³å¯ã€‚</p>

<h2 id="åŠ è½½åœ°å›¾">åŠ è½½åœ°å›¾</h2>
<p>åœ¨é…ç½®å¥½ç›¸å…³ç¯å¢ƒå’Œæ¨¡å—åº“åï¼Œä¸‹é¢æˆ‘å°±ä»¥ åŠ è½½åœ°å›¾ ä½œä¸ºä¾‹å­åˆ†äº«ä¸‹å¦‚ä½•ä½¿ç”¨ ArcGIS JS API å¼€å‘ã€‚</p>

<p>é¦–å…ˆï¼Œå®Œæˆåˆ›å»º Vue é¡¹ç›®åï¼Œå¯æ›´æ”¹ App.vue æ–‡ä»¶ï¼Œæˆ–è€…è‡ªå®šä¹‰ index.vue é¡µé¢æ–‡ä»¶å¹¶è®¾ç½®å¥½routerè·³è½¬ï¼Œå†åœ¨App/indexæ–‡ä»¶ä¸­ importå¼•å…¥ç›¸å…³ ArcGIS æ¨¡å—ï¼Œå¦‚ Map å’Œ MapView. æ¥ç€ï¼Œåˆå§‹åŒ– Map å’Œ MapView å®ä¾‹ï¼Œå¹¶åœ¨é¡µé¢æŒ‚è½½åè°ƒç”¨ã€‚å®Œæ•´é¡µé¢ä»£ç  ä»¥åŠæ‰§è¡Œnpm run serve å‘½ä»¤åçš„ç•Œé¢æ•ˆæœå¦‚ä¸‹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;!--
 * @Author: wason
 * @version: 
 * @Descripttion: 
 * @LastEditors: wason
--&gt;
&lt;template&gt;
  &lt;div id="app"&gt;&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Map from "@arcgis/core/Map";
import MapView from "@arcgis/core/views/MapView";

export default {
  name: "App",
  methods: {
    //åˆ›å»ºåœ°å›¾
    _createMapView: function () {
      try {
        // åŸºç¡€2Dé“è·¯åœ°å›¾æ˜¾ç¤º
        const map = new Map({
          //å®ä¾‹åŒ–åœ°å›¾
          basemap: "streets",
        });
        const view = new MapView({
          //å®ä¾‹åŒ–åœ°å›¾è§†å›¾
          container: "app",
          map: map,
          zoom: 11,
          center: [104.072044, 30.663776], // æˆéƒ½çœå¸‚ç»çº¬åº¦åæ ‡
        });
        view.ui.components = [];
      } catch (err) {
        console.log("åœ°å›¾åˆ›å»ºå¤±è´¥===&gt;", err);
      }
    },
  },

  mounted: function () {
    this._createMapView();
  },
};
&lt;/script&gt;

&lt;style&gt;
@import "https://js.arcgis.com/4.22/@arcgis/core/assets/esri/themes/dark/main.css";
#app {
  position: absolute;
  width: 100%;
  height: 100%;
}
#infoDiv {
  padding: 10px;
  width: 275px;
}
#sliderValue {
  font-weight: bolder;
}
#legendDiv {
  width: 260px;
}
#description {
  padding: 10px 0 10px 0;
}
&lt;/style&gt;
</code></pre></div></div>

<p><img src="/img/20210715/2021071505.png" alt="" /></p>

<p>å½“åœ¨http://localhost:8080/#/ é¡µé¢ä¸‹çœ‹åˆ°ä¸Šå›¾æ—¶ï¼Œä¾¿æˆåŠŸå®ç°äº†é¦–æ¬¡ ArcGIS çš„æ¨¡å—åº”ç”¨ã€‚</p>

:ET