I"‡<h1 id="webpackå­¦ä¹ ä¹‹æ’ä»¶pluginsçƒ­åŠ è½½">webpackå­¦ä¹ ä¹‹æ’ä»¶[Plugins](çƒ­åŠ è½½)</h1>
<p><strong><em>æ¥ä¸Šæ–‡</em></strong></p>

<p>3ï¼‰Hot Module Replacement
Hot Module Replacementï¼ˆHMRï¼‰ä¹Ÿæ˜¯webpacké‡Œå¾ˆæœ‰ç”¨çš„ä¸€ä¸ªæ’ä»¶ï¼Œå®ƒå…è®¸ä½ åœ¨ä¿®æ”¹ç»„ä»¶ä»£ç åï¼Œè‡ªåŠ¨åˆ·æ–°å®æ—¶é¢„è§ˆä¿®æ”¹åçš„æ•ˆæœã€‚</p>

<p>è¦ä½¿ç”¨è¿™ä¸ªæ’ä»¶éœ€è¦ åœ¨webpack.config.jsä¸­å¼•ç”¨æ’ä»¶ã€æ›´æ”¹webpack.config.jsä¸­çš„devServerè®¾ç½®ã€æ›´æ”¹.babelrcé…ç½®æ–‡ä»¶å¼•ç”¨react-transform-hrmçš„æ’ä»¶</p>

<p><strong>è¡¥å……ï¼š</strong></p>
<ul>
  <li>HMRæ˜¯ä¸€ä¸ªwebpackæ’ä»¶ï¼Œå®ƒè®©ä½ èƒ½æµè§ˆå™¨ä¸­å®æ—¶è§‚å¯Ÿæ¨¡å—ä¿®æ”¹åçš„æ•ˆæœï¼Œä½†æ˜¯å¦‚æœä½ æƒ³è®©å®ƒå·¥ä½œï¼Œéœ€è¦å¯¹æ¨¡å—è¿›è¡Œé¢å¤–çš„é…é¢ï¼›</li>
  <li>Babelæœ‰ä¸€ä¸ªå«åšreact-transform-hrmçš„æ’ä»¶ï¼Œå¯ä»¥åœ¨ä¸å¯¹Reactæ¨¡å—è¿›è¡Œé¢å¤–çš„é…ç½®çš„å‰æä¸‹è®©HMRæ­£å¸¸å·¥ä½œï¼›</li>
</ul>

<hr />

<p>â‘  æ›´æ”¹webpack.config.jsï¼Œåœ¨devServerå¢åŠ  hot å’Œ pluginsä¸­å¢åŠ  HotModuleReplacementPlugin æ’ä»¶</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>devServer: {
   contentBase: "./public",//æœ¬åœ°æœåŠ¡å™¨æ‰€åŠ è½½çš„é¡µé¢æ‰€åœ¨çš„ç›®å½•
   historyApiFallback: true,//ä¸è·³è½¬
   inline: true,
   hot: true
 },

plugins: [
 new webpack.BannerPlugin('ç‰ˆæƒæ‰€æœ‰ï¼Œç¿»ç‰ˆå¿…ç©¶'),
 new HtmlWebpackPlugin({
     template: __dirname + "/app/index.tmpl.html"//new ä¸€ä¸ªè¿™ä¸ªæ’ä»¶çš„å®ä¾‹ï¼Œå¹¶ä¼ å…¥ç›¸å…³çš„å‚æ•°
 }),
 new webpack.HotModuleReplacementPlugin()//çƒ­åŠ è½½æ’ä»¶
],
</code></pre></div></div>
<p>â‘¡ å®‰è£…babelçš„æ’ä»¶ react-transform-hmr</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install --save-dev babel-plugin-react-transform react-transform-hmr
</code></pre></div></div>
<p>â‘¢ é…ç½®babel</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// .babelrc
{
  "presets": ["react", "env"],
  "env": {
    "development": {
    "plugins": [["react-transform", {
       "transforms": [{
         "transform": "react-transform-hmr",
         
         "imports": ["react"],
         
         "locals": ["module"]
       }]
     }]]
    }
  }
}
</code></pre></div></div>
<p>â‘£ è¿è¡ŒæœåŠ¡å™¨ npm run start ,ç›´æ¥æ›´æ”¹Greeter.jsä¸­çš„å†…å®¹åä¿å­˜ï¼Œé¡µé¢ç›´æ¥è·Ÿç€æ”¹å˜ã€‚</p>

<p>4ï¼‰äº§å“é˜¶æ®µçš„æ„å»º<br />
åœ¨äº§å“é˜¶æ®µï¼Œå¯èƒ½è¿˜éœ€è¦å¯¹æ‰“åŒ…çš„æ–‡ä»¶è¿›è¡Œé¢å¤–çš„å¤„ç†ï¼Œæ¯”å¦‚è¯´ä¼˜åŒ–ï¼Œå‹ç¼©ï¼Œç¼“å­˜ä»¥åŠåˆ†ç¦»CSSå’ŒJSã€‚<br />
â‘  åˆ›å»ºwebpack.production.config.jsæ–‡ä»¶</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// webpack.production.config.js
const webpack = require('webpack');
const HtmlWebpackPlugin = require('html-webpack-plugin');

module.exports = {
    entry: __dirname + "/app/main.js", //å·²å¤šæ¬¡æåŠçš„å”¯ä¸€å…¥å£æ–‡ä»¶
    output: {
        path: __dirname + "/build",
        filename: "bundle.js"
    },
    devtool: 'null', //æ³¨æ„ä¿®æ”¹äº†è¿™é‡Œï¼Œè¿™èƒ½å¤§å¤§å‹ç¼©æˆ‘ä»¬çš„æ‰“åŒ…ä»£ç 
    devServer: {
        contentBase: "./public", //æœ¬åœ°æœåŠ¡å™¨æ‰€åŠ è½½çš„é¡µé¢æ‰€åœ¨çš„ç›®å½•
        historyApiFallback: true, //ä¸è·³è½¬
        inline: true,
        hot: true
    },
    module: {
        rules: [
          {
            test: /(\.jsx|\.js)$/,
            use: {
                loader: "babel-loader"
            },
            exclude: /node_modules/
          }, {
            test: /\.css$/,
            // ä¸‹é¢è¿™æ®µä»£ç æœ‰é—®é¢˜
            use: ExtractTextPlugin.extract({
                fallback: "style-loader",
                use: [{
                    loader: "css-loader",
                    options: {
                        modules: true
                    }
                }, {
                    loader: "postcss-loader"
                }],
            })
ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•ä¼šæŠ¥  ExtractTextPlugin is not defined æŠ¥é”™ï¼Œæ‰€ä»¥æ”¹ç”¨ä¸‹é¢ä»£ç ï¼š
            use: [
              {
                loader: 'style-loader'
              },
              {
                loader: 'css-loader',
                options: {
                  modules: true
                } 
              },
              {
                loader: 'postcss-loader'
              }
            ]
        }]
    },
    plugins: [
        new webpack.BannerPlugin('ç‰ˆæƒæ‰€æœ‰ï¼Œç¿»ç‰ˆå¿…ç©¶'),
        new HtmlWebpackPlugin({
            template: __dirname + "/app/index.tmpl.html" //new ä¸€ä¸ªè¿™ä¸ªæ’ä»¶çš„å®ä¾‹ï¼Œå¹¶ä¼ å…¥ç›¸å…³çš„å‚æ•°
        }),
        new webpack.HotModuleReplacementPlugin() //çƒ­åŠ è½½æ’ä»¶
    ],
};
</code></pre></div></div>
<p>â‘¡ ä¿®æ”¹ package.jsoné‡Œçš„scriptsæŒ‡ä»¤</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//package.json
{
  "name": "test",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",
    "start": "webpack",
    "server": "webpack-dev-server --open",
    "build": "NODE_ENV=production webpack --config ./webpack.production.config.js --progress"
  },
  "author": "",
  "license": "ISC",
  "devDependencies": {
...
  },
  "dependencies": {
    "react": "^15.6.1",
    "react-dom": "^15.6.1"
  }
}

æ³¨æ„:å¦‚æœæ˜¯windowç”µè„‘ï¼Œbuildéœ€è¦é…ç½®ä¸º"build":
 "set NODE_ENV=production &amp;&amp; webpack --config ./webpack.production.config.js --progress".  

</code></pre></div></div>
<p>â‘¢ ç„¶åè¿è¡Œnpm run build å°±å¯ä»¥åœ¨ buildæ–‡ä»¶å¤¹ä¸­ç”Ÿæˆæ‰“åŒ…åçš„æ–‡ä»¶ã€‚</p>

<p><strong><em>To Be Continue~</em></strong></p>

<h3 id="å‚è€ƒæ–‡ç« ">å‚è€ƒæ–‡ç« </h3>
<p><a href="https://segmentfault.com/a/1190000006178770">1. å…¥é—¨ webpackï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†</a><br />
<a href="https://www.webpackjs.com/guides/getting-started/">2. webpack å®˜ç½‘</a><br />
<a href="https://segmentfault.com/a/1190000013699050">3. webpackå‘ç³»åˆ—â€“å®‰è£…webpack-cli</a></p>

:ET